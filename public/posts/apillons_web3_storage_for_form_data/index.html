<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Apillons_web3_storage_for_form_data | Ravil Who Codes</title>
<meta name="title" content="Apillons_web3_storage_for_form_data" />
<meta name="description" content="Introduction Brief introduction to the technologies used (Vite, React, TypeScript, Apillon Hosting, REST API). The purpose of the tutorial: to create a web form that saves data to Apillon Hosting. Setting Up the Project Creating the Project with Vite and TypeScript First, let&rsquo;s create a new project using Vite with TypeScript.
Open your terminal and run the following commands:
npm create vite@latest my-react-app --template react-ts cd my-react-app Updating package.json Scripts Next, update your package." />
<meta name="keywords" content="" />


<meta property="og:url" content="http://localhost:1313/posts/apillons_web3_storage_for_form_data/">
  <meta property="og:site_name" content="Ravil Who Codes">
  <meta property="og:title" content="Apillons_web3_storage_for_form_data">
  <meta property="og:description" content="Introduction Brief introduction to the technologies used (Vite, React, TypeScript, Apillon Hosting, REST API). The purpose of the tutorial: to create a web form that saves data to Apillon Hosting. Setting Up the Project Creating the Project with Vite and TypeScript First, let’s create a new project using Vite with TypeScript.
Open your terminal and run the following commands:
npm create vite@latest my-react-app --template react-ts cd my-react-app Updating package.json Scripts Next, update your package.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-01T17:22:05+02:00">
    <meta property="article:modified_time" content="2024-08-01T17:22:05+02:00">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Apillons_web3_storage_for_form_data">
  <meta name="twitter:description" content="Introduction Brief introduction to the technologies used (Vite, React, TypeScript, Apillon Hosting, REST API). The purpose of the tutorial: to create a web form that saves data to Apillon Hosting. Setting Up the Project Creating the Project with Vite and TypeScript First, let’s create a new project using Vite with TypeScript.
Open your terminal and run the following commands:
npm create vite@latest my-react-app --template react-ts cd my-react-app Updating package.json Scripts Next, update your package.">




  <meta itemprop="name" content="Apillons_web3_storage_for_form_data">
  <meta itemprop="description" content="Introduction Brief introduction to the technologies used (Vite, React, TypeScript, Apillon Hosting, REST API). The purpose of the tutorial: to create a web form that saves data to Apillon Hosting. Setting Up the Project Creating the Project with Vite and TypeScript First, let’s create a new project using Vite with TypeScript.
Open your terminal and run the following commands:
npm create vite@latest my-react-app --template react-ts cd my-react-app Updating package.json Scripts Next, update your package.">
  <meta itemprop="datePublished" content="2024-08-01T17:22:05+02:00">
  <meta itemprop="dateModified" content="2024-08-01T17:22:05+02:00">
  <meta itemprop="wordCount" content="1208">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>

</head>

<body>
  <header><a href="/" class="title">
  <h2>Ravil Who Codes</h2>
</a>
<nav><a href="/">Home</a>

<a href="/posts/">Posts</a>


</nav>
</header>
  <main>

<content>
  <h2 id="introduction">Introduction</h2>
<ul>
<li>Brief introduction to the technologies used (Vite, React, TypeScript, Apillon Hosting, REST API).</li>
<li>The purpose of the tutorial: to create a web form that saves data to Apillon Hosting.</li>
</ul>
<h2 id="setting-up-the-project">Setting Up the Project</h2>
<h3 id="creating-the-project-with-vite-and-typescript">Creating the Project with Vite and TypeScript</h3>
<p>First, let&rsquo;s create a new project using Vite with TypeScript.</p>
<p>Open your terminal and run the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm create vite@latest my-react-app --template react-ts
</span></span><span style="display:flex;"><span>cd my-react-app
</span></span></code></pre></div><h3 id="updating-packagejson-scripts">Updating package.json Scripts</h3>
<p>Next, update your package.json to include a script for starting the JSON Server. Your scripts section should look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;scripts&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;dev&#34;</span>: <span style="color:#e6db74">&#34;vite&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;build&#34;</span>: <span style="color:#e6db74">&#34;tsc -b &amp;&amp; vite build&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;lint&#34;</span>: <span style="color:#e6db74">&#34;eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;preview&#34;</span>: <span style="color:#e6db74">&#34;vite preview&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>,
</span></span></code></pre></div><h2 id="creating-the-form-component">Creating the Form Component</h2>
<p>Now, let&rsquo;s create our form component in React.</p>
<h3 id="creating-formtsx">Creating Form.tsx</h3>
<p>Create a file named Form.tsx in the src directory with the following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>import React, <span style="color:#f92672">{</span> useState <span style="color:#f92672">}</span> from <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const Form: React.FC <span style="color:#f92672">=</span> <span style="color:#f92672">()</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  const <span style="color:#f92672">[</span>email, setEmail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> useState&lt;string&gt;<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>  const <span style="color:#f92672">[</span>crypto, setCrypto<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> useState&lt;string&gt;<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  const handleSubmit <span style="color:#f92672">=</span> async <span style="color:#f92672">(</span>event: React.FormEvent<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    event.preventDefault<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>    const formData <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> email, crypto <span style="color:#f92672">}</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    try <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      const response <span style="color:#f92672">=</span> await fetch<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;http://localhost:5000/form&#34;</span>, <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        method: <span style="color:#e6db74">&#34;POST&#34;</span>,
</span></span><span style="display:flex;"><span>        headers: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;Content-Type&#34;</span>: <span style="color:#e6db74">&#34;application/json&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>        body: JSON.stringify<span style="color:#f92672">(</span>formData<span style="color:#f92672">)</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>response.ok<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        alert<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Form submitted successfully!&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>        setEmail<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>        setCrypto<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        alert<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Error submitting form.&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span> catch <span style="color:#f92672">(</span>error<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      console.error<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Error&#34;</span>, error<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>      alert<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Error submitting form&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>    &lt;form onSubmit<span style="color:#f92672">={</span>handleSubmit<span style="color:#f92672">}</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;div className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-3&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;label htmlFor<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span> className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-label&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          Email:
</span></span><span style="display:flex;"><span>        &lt;/label&gt;
</span></span><span style="display:flex;"><span>        &lt;input
</span></span><span style="display:flex;"><span>          className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span>
</span></span><span style="display:flex;"><span>          type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span>
</span></span><span style="display:flex;"><span>          id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span>
</span></span><span style="display:flex;"><span>          value<span style="color:#f92672">={</span>email<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>          onChange<span style="color:#f92672">={(</span>e<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; setEmail<span style="color:#f92672">(</span>e.target.value<span style="color:#f92672">)}</span>
</span></span><span style="display:flex;"><span>          required
</span></span><span style="display:flex;"><span>        /&gt;
</span></span><span style="display:flex;"><span>      &lt;/div&gt;
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;label htmlFor<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crypto&#34;</span> className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-label&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          Cryptocurrency you hold most of:
</span></span><span style="display:flex;"><span>        &lt;/label&gt;
</span></span><span style="display:flex;"><span>        &lt;input
</span></span><span style="display:flex;"><span>          className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span>
</span></span><span style="display:flex;"><span>          type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crypto&#34;</span>
</span></span><span style="display:flex;"><span>          id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crypto&#34;</span>
</span></span><span style="display:flex;"><span>          value<span style="color:#f92672">={</span>crypto<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>          onChange<span style="color:#f92672">={(</span>e<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; setCrypto<span style="color:#f92672">(</span>e.target.value<span style="color:#f92672">)}</span>
</span></span><span style="display:flex;"><span>          required
</span></span><span style="display:flex;"><span>        /&gt;
</span></span><span style="display:flex;"><span>      &lt;/div&gt;
</span></span><span style="display:flex;"><span>      &lt;button type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        Submit
</span></span><span style="display:flex;"><span>      &lt;/button&gt;
</span></span><span style="display:flex;"><span>    &lt;/form&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>export default Form;
</span></span></code></pre></div><h2 id="integrating-the-form-into-the-application">Integrating the Form into the Application</h2>
<h3 id="modifying-apptsx">Modifying App.tsx</h3>
<p>Update App.tsx to include the Form component:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>import React from <span style="color:#e6db74">&#39;react&#39;</span>;
</span></span><span style="display:flex;"><span>import <span style="color:#e6db74">&#39;./App.css&#39;</span>;
</span></span><span style="display:flex;"><span>import Form from <span style="color:#e6db74">&#39;./Form&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const App: React.FC <span style="color:#f92672">=</span> <span style="color:#f92672">()</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;div className<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;App&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;h1&gt;Crypto Holding Form&lt;/h1&gt;
</span></span><span style="display:flex;"><span>&lt;Form /&gt;
</span></span><span style="display:flex;"><span>&lt;/div&gt;
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>export default App;
</span></span></code></pre></div><h2 id="build-backend-to-handle-saving-of-files-and-uploading-them-to-apillons-web3-hosting">Build backend to handle saving of files and uploading them to Apillon&rsquo;s Web3 hosting</h2>
<p>Navigate to the parent directory of <code>my-react-app</code></p>
<p>In terminal run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir backend
</span></span><span style="display:flex;"><span>cd backend
</span></span><span style="display:flex;"><span>npm init -y
</span></span><span style="display:flex;"><span>npm install express @apillon/sdk cors dotenv
</span></span></code></pre></div><h3 id="cretae-a-quick-server-with-express">Cretae a quick server with express</h3>
<p>In the backend directory we created earlier make new file name server.js and add following content to it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>const express <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;express&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>const fs <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;fs&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>const path <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;path&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>const cors <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;cors&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const app <span style="color:#f92672">=</span> express<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>const PORT <span style="color:#f92672">=</span> 5000;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.use<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>  cors<span style="color:#f92672">({</span>
</span></span><span style="display:flex;"><span>    origin: <span style="color:#e6db74">&#34;http://localhost:5173&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">})</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.use<span style="color:#f92672">(</span>express.json<span style="color:#f92672">())</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.post<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/form&#34;</span>, <span style="color:#f92672">(</span>req, res<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  const <span style="color:#f92672">{</span> email, crypto <span style="color:#f92672">}</span> <span style="color:#f92672">=</span> req.body;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>!email <span style="color:#f92672">||</span> !crypto<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    res.status<span style="color:#f92672">(</span>400<span style="color:#f92672">)</span>.json<span style="color:#f92672">({</span> error: <span style="color:#e6db74">&#34;Email and cryptocurrency is required!&#34;</span> <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  const fileName <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span>email.replace(/[@.]/g, <span style="color:#e6db74">&#34;_&#34;</span>)<span style="color:#e6db74">}</span>.json<span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>  const filePath <span style="color:#f92672">=</span> path.join<span style="color:#f92672">(</span>__dirname, <span style="color:#e6db74">&#34;submissions&#34;</span>, fileName<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>  const fileContent <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#f92672">{</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>email<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>,<span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;crypto&#34;</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>crypto<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#f92672">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  fs.writeFile<span style="color:#f92672">(</span>filePath, fileContent, <span style="color:#f92672">(</span>err<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>err<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      console.error<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Error writin file&#34;</span>, err<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> res.status<span style="color:#f92672">(</span>500<span style="color:#f92672">)</span>.json<span style="color:#f92672">({</span> error: <span style="color:#e6db74">&#34;Failed to save submission&#34;</span> <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app.listen<span style="color:#f92672">(</span>PORT, <span style="color:#f92672">()</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  console.log<span style="color:#f92672">(</span><span style="color:#e6db74">`</span>Server is running on http://localhost:<span style="color:#e6db74">${</span>PORT<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">})</span>;
</span></span></code></pre></div><p>Now you have a server that will accept the data sent from your React app in form of json, parse it and save to /submissions/ directory inside of your backend directory.</p>
<h2 id="sutup-for-apilon-hosting">Sutup for Apilon Hosting</h2>
<h3 id="obtaining-api-keys">Obtaining API Keys</h3>
<p>Navigate to <a href="https://apillon.io/">Apillon&rsquo;s</a> website and create an account. After logging into your dashboard, navigate to <a href="https://app.apillon.io/dashboard/api-keys">&ldquo;API Keys&rdquo;</a>, now create and save the keypair data securely.</p>
<h3 id="creating-a-storage-bucket">Creating a storage bucket</h3>
<p>Additionally you need to create a bucket for storing your data in, to do that you need to naviagte to <a href="https://app.apillon.io/dashboard/service/storage">Storage</a> section and press the &ldquo;New bucket&rdquo; button. This will create a bucket with an assigned UUID.</p>
<h3 id="configure-environment-variables">Configure environment variables</h3>
<p>Navigate to the backend directory and create a <code>.env</code> file and add your API key, API secret and bucket UUID.</p>
<p>should look something like this(obviously replace values with your actual keys):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>APILLON_BUCKET_UUID<span style="color:#f92672">=</span>&lt;YOUR BUCKET UUID&gt;
</span></span><span style="display:flex;"><span>APILLON_API_KEY<span style="color:#f92672">=</span>&lt;YOUR API KEY&gt;
</span></span><span style="display:flex;"><span>APILLON_API_SECRET<span style="color:#f92672">=</span>&lt;YOUR API KEY SECRET&gt;
</span></span></code></pre></div><h3 id="create-the-script-to-upload-the-files-to-your-decentralized-storage-bucket">Create the script to upload the files to your decentralized storage bucket</h3>
<p>Create a <code>fileUpload.js</code> file in the backend folder with the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>// Importing necessary modules and classes from the @apillon/sdk package
</span></span><span style="display:flex;"><span>const <span style="color:#f92672">{</span> Storage, LogLevel <span style="color:#f92672">}</span> <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;@apillon/sdk&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Importing the file system module to read files from the local system
</span></span><span style="display:flex;"><span>const fs <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;fs&#34;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Loading environment variables from a .env file into process.env
</span></span><span style="display:flex;"><span>require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;dotenv&#34;</span><span style="color:#f92672">)</span>.config<span style="color:#f92672">()</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Storing API key, secret, and bucket UUID from environment variables
</span></span><span style="display:flex;"><span>const APILLON_API_KEY <span style="color:#f92672">=</span> process.env.APILLON_API_KEY;
</span></span><span style="display:flex;"><span>const APILLON_API_SECRET <span style="color:#f92672">=</span> process.env.APILLON_API_SECRET;
</span></span><span style="display:flex;"><span>const APILLON_BUCKET_UUID <span style="color:#f92672">=</span> process.env.APILLON_BUCKET_UUID;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Defining an asynchronous <span style="color:#66d9ef">function</span> to handle file upload
</span></span><span style="display:flex;"><span>const handleUpload <span style="color:#f92672">=</span> async <span style="color:#f92672">(</span>savedFileName<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  // Creating an instance of the Storage class with API credentials and log level
</span></span><span style="display:flex;"><span>  const storage <span style="color:#f92672">=</span> new Storage<span style="color:#f92672">({</span>
</span></span><span style="display:flex;"><span>    key: APILLON_API_KEY, // API key <span style="color:#66d9ef">for</span> authentication
</span></span><span style="display:flex;"><span>    secret: APILLON_API_SECRET, // API secret <span style="color:#66d9ef">for</span> authentication
</span></span><span style="display:flex;"><span>    logLevel: LogLevel.VERBOSE, // Setting the log level to verbose <span style="color:#66d9ef">for</span> detailed logging
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Getting a reference to the specific bucket using the bucket UUID
</span></span><span style="display:flex;"><span>  const bucket <span style="color:#f92672">=</span> storage.bucket<span style="color:#f92672">(</span>APILLON_BUCKET_UUID<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Reading the file to be uploaded from the local filesystem into a buffer
</span></span><span style="display:flex;"><span>  const savedFileBuffer <span style="color:#f92672">=</span> fs.readFileSync<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;./submissions/&#34;</span> + savedFileName<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Uploading the file to the specified bucket with additional options
</span></span><span style="display:flex;"><span>  await bucket.uploadFiles<span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        fileName: savedFileName, // Name of the file to be uploaded
</span></span><span style="display:flex;"><span>        contentType: <span style="color:#e6db74">&#34;application/json&#34;</span>, // MIME type of the file
</span></span><span style="display:flex;"><span>        content: savedFileBuffer, // File content as a buffer
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span> wrapWithDirectory: true, directoryPath: <span style="color:#e6db74">&#34;/ReactFormData&#34;</span> <span style="color:#f92672">}</span> // Upload options including directory path
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Exporting the handleUpload <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">for</span> use in other modules
</span></span><span style="display:flex;"><span>module.exports <span style="color:#f92672">=</span> handleUpload;
</span></span></code></pre></div><h3 id="tie-the-server-and-the-upload-script-together">Tie the server and the upload script together</h3>
<p>Import <code>handleUpload</code> to <code>server.js</code> by adding at the very beginning of the file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>const handleUpload <span style="color:#f92672">=</span> require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;./filesUpload&#34;</span><span style="color:#f92672">)</span>;
</span></span></code></pre></div><p>Now that you have the function imported, lets call it from <code>app.post</code> and pass the filename of the saved data as a parameter for the SDK to find the desired file in <code>submissions</code> dir.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>app.post<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/form&#34;</span>, <span style="color:#f92672">(</span>req, res<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  const <span style="color:#f92672">{</span> email, crypto <span style="color:#f92672">}</span> <span style="color:#f92672">=</span> req.body;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>!email <span style="color:#f92672">||</span> !crypto<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    res.status<span style="color:#f92672">(</span>400<span style="color:#f92672">)</span>.json<span style="color:#f92672">({</span> error: <span style="color:#e6db74">&#34;Email and cryptocurrency is required!&#34;</span> <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  const fileName <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span>email.replace(/[@.]/g, <span style="color:#e6db74">&#34;_&#34;</span>)<span style="color:#e6db74">}</span>.json<span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>  const filePath <span style="color:#f92672">=</span> path.join<span style="color:#f92672">(</span>__dirname, <span style="color:#e6db74">&#34;submissions&#34;</span>, fileName<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>  const fileContent <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#f92672">{</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>email<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>,<span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;crypto&#34;</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>crypto<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#f92672">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  fs.writeFile<span style="color:#f92672">(</span>filePath, fileContent, <span style="color:#f92672">(</span>err<span style="color:#f92672">)</span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>err<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      console.error<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Error writin file&#34;</span>, err<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> res.status<span style="color:#f92672">(</span>500<span style="color:#f92672">)</span>.json<span style="color:#f92672">({</span> error: <span style="color:#e6db74">&#34;Failed to save submission&#34;</span> <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    // here is the call to <span style="color:#66d9ef">function</span> with the passed fileName variable
</span></span><span style="display:flex;"><span>    handleUpload<span style="color:#f92672">(</span>fileName<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>    res.status<span style="color:#f92672">(</span>200<span style="color:#f92672">)</span>.json<span style="color:#f92672">({</span> message: <span style="color:#e6db74">&#34;Form submitted successfully&#34;</span> <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span>    //
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">})</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">})</span>;
</span></span></code></pre></div><h2 id="running-the-application">Running the Application</h2>
<p>Now it&rsquo;s time to run both the Server and the Vite development server.</p>
<h3 id="starting-the-server">Starting the Server</h3>
<p>Open terminal in the <code>backend</code> directory and run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm start
</span></span></code></pre></div><h4 id="you-should-see-an-output-like-this">You should see an output like this:</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; backend@1.0.0 start
</span></span><span style="display:flex;"><span>&gt; node server.js
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Server is running on http://localhost:5000
</span></span></code></pre></div><h3 id="starting-the-vite-development-server">Starting the Vite Development Server</h3>
<p>Open another terminal and run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm run dev
</span></span></code></pre></div><h2 id="testing-the-application">Testing the Application</h2>
<p>Open your browser and navigate to http://localhost:5173. Fill out the form and submit it. The data should be sent to the server, saved <code>submissions</code> and sent to Web3 storage using Apillon&rsquo;s SDK.</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="common-issues-and-fixes">Common Issues and Fixes</h4>
<p>If you encounter a net::ERR_CONNECTION_REFUSED error, ensure that the JSON Server is running by executing npm run server and checking the output.</p>
<h4 id="network-and-cors-issues">Network and CORS Issues</h4>
<p>By default, JSON Server should handle CORS, but if you encounter issues, you may need to configure CORS in the JSON Server setup.</p>
<h1 id="code-repository">Code Repository</h1>
<p>You can find the complete source code for this tutorial <a href="https://github.com/ravil-who-codes">here</a>.</p>

</content>
<p>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
